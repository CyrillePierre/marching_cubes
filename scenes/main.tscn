[gd_scene load_steps=8 format=3 uid="uid://dkp31fyrty2x1"]

[ext_resource type="Script" path="res://scripts/main.gd" id="1_1ab21"]
[ext_resource type="Script" path="res://scripts/marching_cubes.gd" id="1_lidwy"]
[ext_resource type="PackedScene" uid="uid://by8qnc433323d" path="res://nodes/player.tscn" id="2_q6x1v"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_m02rb"]
seed = 1460
frequency = 0.0289
fractal_octaves = 2
domain_warp_enabled = true
domain_warp_amplitude = 13.41
domain_warp_frequency = 0.02
domain_warp_fractal_octaves = 2

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_8o6ga"]
width = 64
height = 64
in_3d_space = true
generate_mipmaps = false
noise = SubResource("FastNoiseLite_m02rb")

[sub_resource type="PlaneMesh" id="PlaneMesh_l3mta"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_fuyhp"]
points = PackedVector3Array(-1, 0, -1, -1, 0, 1, 1, 0, -1, 1, 0, 1)

[node name="root" type="Node3D"]
script = ExtResource("1_1ab21")

[node name="dynamic_terrain" type="StaticBody3D" parent="."]
script = ExtResource("1_lidwy")
grid_size = Vector3i(40, 20, 40)
height_map = SubResource("NoiseTexture2D_8o6ga")
height_coef = 1.05
height_offset = 0.315

[node name="mesh" type="MeshInstance3D" parent="dynamic_terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -2, 0)
skeleton = NodePath("../..")

[node name="collision" type="CollisionShape3D" parent="dynamic_terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -2, 0)

[node name="platform" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 10, 2)

[node name="mesh" type="MeshInstance3D" parent="platform"]
mesh = SubResource("PlaneMesh_l3mta")
skeleton = NodePath("../..")

[node name="collision" type="CollisionShape3D" parent="platform"]
shape = SubResource("ConvexPolygonShape3D_fuyhp")

[node name="light1" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.627019, 0.464174, -0.625611, -0.106388, 0.744543, 0.659043, 0.771705, 0.47979, -0.41746, -3, 2, 0)
light_energy = 0.7

[node name="light2" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.152874, 0.299538, 0.941757, -0.755681, 0.649541, -0.0839265, -0.636849, -0.698838, 0.325652, -3, 2, -1.832)
light_energy = 0.1

[node name="GridMap" type="GridMap" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0)
cell_size = Vector3(1, 1, 1)
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="player" parent="." instance=ExtResource("2_q6x1v")]
transform = Transform3D(-0.808678, 0, -0.588251, 0, 1, 0, 0.588251, 0, -0.808678, 2, 10, 2)
